#!/bin/bash

set -e

echo "ğŸ”§ Setting up your Mac from scratch..."
# Check if Homebrew is installed
if ! command -v brew &> /dev/null; then
  echo "ğŸ“¦ Homebrew not found. Installing..."
  /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

  # Add Homebrew to PATH (Apple Silicon vs Intel)
  if [[ $(uname -m) == "arm64" ]]; then
    echo 'eval "$(/opt/homebrew/bin/brew shellenv)"' >> "$HOME/.zprofile"
    eval "$(/opt/homebrew/bin/brew shellenv)"
  else
    echo 'eval "$(/usr/local/bin/brew shellenv)"' >> "$HOME/.bash_profile"
    eval "$(/usr/local/bin/brew shellenv)"
  fi
else
  echo "âœ… Homebrew is already installed."
fi

echo "ğŸ“¦ Installing packages via Homebrew..."
# List of CLI packages to install
BREW_PACKAGES=(bash gettext wezterm lima font-fira-code-nerd-font font-fira-code font-meslo-for-powerlevel10k)
# Install packages
for pkg in "${BREW_PACKAGES[@]}"; do
  echo "â¡ï¸ Installing $pkg..."
  brew install "$pkg"
done

echo "ğŸ‰ Setup complete!"
